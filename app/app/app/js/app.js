(function(e){function t(t){for(var a,o,i=t[0],c=t[1],u=t[2],l=0,d=[];l<i.length;l++)o=i[l],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);f&&f(t);while(d.length)d.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,o=1;o<n.length;o++){var i=n[o];0!==r[i]&&(a=!1)}a&&(s.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},o={app:0},r={app:0},s=[];function i(e){return c.p+"app/js/"+({}[e]||e)+".js"}function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-40bd3733":1,"chunk-f0635ab6":1,"chunk-3acfd4b4":1,"chunk-7de5aef8":1,"chunk-58419d85":1,"chunk-6f783ebb":1,"chunk-cb80a796":1,"chunk-e0c91a8e":1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise((function(t,n){for(var a="app/css/"+({}[e]||e)+".css",r=c.p+a,s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var u=s[i],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===a||l===r))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){u=d[i],l=u.getAttribute("data-href");if(l===a||l===r)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var a=t&&t.target&&t.target.src||r,s=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=a,delete o[e],f.parentNode.removeChild(f),n(s)},f.href=r;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){o[e]=0})));var a=r[e];if(0!==a)if(a)t.push(a[2]);else{var s=new Promise((function(t,n){a=r[e]=[t,n]}));t.push(a[2]=s);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=i(e);var d=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(f);var n=r[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+a+": "+o+")",d.name="ChunkLoadError",d.type=a,d.request=o,n[1](d)}r[e]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="http://www.ihuanu.cn/szbook/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var f=l;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},2:function(e,t){},"21bb":function(e,t,n){"use strict";var a=n("2d73"),o=n.n(a);o.a},"2d73":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"main"},[n("keep-alive",[this.$route.meta.keepAlive?n("router-view"):e._e()],1),this.$route.meta.keepAlive?e._e():n("router-view")],1),n("van-tabbar",{attrs:{"active-color":"#ff1100","inactive-color":"#000",route:"",id:"nav",fixed:!1}},[!this.$route.params.id||this.$route.query.tatle?n("div",{staticClass:"bottomBox"},e._l(e.Tabbar,(function(t,a){return n("van-tabbar-item",{key:a,on:{click:function(n){return e.goto(t.path)}}},[n("van-icon",{staticClass:"iconfont",attrs:{"class-prefix":"icon",name:t.icon}}),n("div",[e._v(e._s(t.text))])],1)})),1):n("div",{staticClass:"bottomBox buyGoods"},[n("div",{staticStyle:{"line-height":"32px",margin:"0"}},[n("p",[n("van-icon",{attrs:{name:"service-o"}})],1),n("p",{staticStyle:{"line-height":"10px"}},[e._v("客服")])]),n("div",{staticStyle:{"line-height":"50px",color:"#bdbdbd"}},[n("van-icon",{attrs:{name:"like"}})],1),n("div",{staticStyle:{"line-height":"50px"}},[e._v("立即购买")]),n("div",{staticStyle:{"line-height":"50px",background:"#f10",color:"#fff"},on:{click:e.addCart}},[e._v("加入购物车")])])])],1)},r=[],s=(n("9a83"),n("f564")),i=(n("ab71"),n("58e6")),c=(n("2994"),n("2bdd")),u=(n("c3a6"),n("ad06")),l=(n("a52c"),n("2ed4")),d=(n("537a"),n("ac28")),f=(n("be35"),n("d0e2")),p=n("bc3a"),h=n.n(p),m=h.a.CancelToken.source(),b=h.a.create({baseURL:"http://42.194.179.50/api",timeout:8e3,withCredentials:!1,headers:{"Content-Type":"application/json;charset=UTF-8"},cancelToken:m.token});b.source=m;var v=b;Object(f["a"])(),a["a"].use(d["a"]),a["a"].use(l["a"]),a["a"].use(u["a"]),a["a"].use(c["a"]),a["a"].use(i["a"]),a["a"].use(s["a"]);var g={data:function(){return{Tabbar:[{path:"/home",name:"home",icon:"home",badge:0,text:"书城"},{path:"/category",name:"category",icon:"shujiguanli",badge:0,text:"类别"},{path:"/hotnews",name:"hotNews",icon:"tubiao-",badge:0,text:"热点"},{path:"/shopcart",name:"shopCart",icon:"gouwuchezhengpin",badge:0,text:"购物车"},{path:"/mine",name:"mine",icon:"wode",badge:0,text:"我的"}]}},created:function(){console.log("this.$store.state",this.$store.state)},methods:{addCart:function(){var e=this;if(localStorage.getItem("userInfo")){var t=this.$store.state.currentGoods.book_info.isbn;this.$request.get("/goods?isbn="+t).then((function(t){var n=t.data.data[0];n?(e.$store.commit("changeUserInfo",n),Object(s["a"])({type:"success",message:"成功添加购物车"}),e.$request.patch("/goods",{username:e.$store.state.userInfo.username,cartInfo:e.$store.state.userInfo.cartInfo}).then((function(e){}))):alert("该商品不存在数据库中.")}))}else this.$router.push("/mine")},goto:function(e){this.$route.path!=e&&this.$router.push(e)}},watch:{"$route.path":function(e,t){}}};document.title="深圳书城";var k=g,y=(n("5c0b"),n("2877")),_=Object(y["a"])(k,o,r,!1,null,null,null),I=_.exports,w=(n("d3b7"),n("8c4f")),x=n("bb51");a["a"].use(w["a"]);var C=[{path:"/",redirect:"/home"},{path:"/home",name:"Home",meta:{keepAlive:!0},component:x["default"]},{path:"/shopcart",name:"ShopCart",component:function(){return Promise.all([n.e("chunk-cb80a796"),n.e("chunk-e0c91a8e")]).then(n.bind(null,"712d"))},meta:{keepAlive:!1}},{path:"/category",name:"Category",meta:{keepAlive:!0},component:function(){return n.e("chunk-6f783ebb").then(n.bind(null,"bb511"))}},{path:"/myOrders",name:"myOrders",meta:{keepAlive:!1},component:function(){return Promise.all([n.e("chunk-cb80a796"),n.e("chunk-2d22fd93")]).then(n.bind(null,"ea89"))}},{path:"/goodslist/:id",name:"GoodsList",meta:{keepAlive:!1},component:function(){return Promise.all([n.e("chunk-55ac4ced"),n.e("chunk-7de5aef8")]).then(n.bind(null,"6109"))}},{path:"/goods/:id",name:"Goods",meta:{keepAlive:!1},component:function(){return n.e("chunk-58419d85").then(n.bind(null,"c948"))}},{path:"/hotnews",name:"HotNews",meta:{keepAlive:!1},component:function(){return Promise.all([n.e("chunk-55ac4ced"),n.e("chunk-3acfd4b4")]).then(n.bind(null,"d585"))}},{path:"/shopcart",name:"ShopCart",meta:{keepAlive:!1},component:function(){return Promise.all([n.e("chunk-cb80a796"),n.e("chunk-e0c91a8e")]).then(n.bind(null,"712d"))}},{path:"/mine",name:"Mine",meta:{keepAlive:!1},component:function(){return Promise.all([n.e("chunk-40bd3733"),n.e("chunk-f0635ab6")]).then(n.bind(null,"3adc"))}},{path:"/reg",name:"Reg",meta:{keepAlive:!1},component:function(){return Promise.all([n.e("chunk-40bd3733"),n.e("chunk-2d0b2746")]).then(n.bind(null,"23d3"))}},{path:"/login",name:"Login",meta:{keepAlive:!0},component:function(){return Promise.all([n.e("chunk-40bd3733"),n.e("chunk-2d0e9577")]).then(n.bind(null,"8cb8"))}},{path:"*",name:"404",component:function(){return Promise.resolve().then(n.bind(null,"bb51"))}}],S=new w["a"]({mode:"history",routes:C,scrollBehavior:function(e,t,n){return n||{x:0,y:0}}}),$=S,N=(n("4de4"),n("a15b"),n("d81d"),n("13d5"),n("45fc"),n("b680"),n("ac1f"),n("1276"),n("2f62"));n("9490"),n("0706");a["a"].use(N["a"]);var z=new N["a"].Store({state:function(){return localStorage.getItem("szbookUsername")&&localStorage.getItem("szbookcarInfo")?{userInfo:{username:localStorage.getItem("szbookUsername"),cartInfo:JSON.parse(localStorage.getItem("szbookcarInfo"))},currentGoods:{}}:{userInfo:{cartInfo:[],username:""},currentGoods:{}}},getters:{totalPrice:function(e){var t=e.userInfo.cartInfo.filter((function(e){return e.checked})),n=t.reduce((function(e,t){var n=t.book.line_price.split("");return n.shift(),n=parseFloat(n.join("")),e+n*t.num}),0);return n.toFixed(2)}},mutations:{addUserInfo:function(e){e.userInfo.username=localStorage.getItem("szbookUsername"),e.userInfo.cartInfo=JSON.parse(localStorage.getItem("szbookcarInfo"))},logOut:function(e){e.userInfo.cartInfo=[],e.userInfo.username="",e.userInfo.currentGoods={}},setCurrentGoods:function(e,t){e.currentGoods=t},changeUserInfo:function(e,t){var n=e.userInfo.cartInfo;try{n.some((function(e){return e.book._id==t._id}))?n.map((function(e){return e.book._id==t._id&&(e.num+=1),e})):e.userInfo.cartInfo.push({book:t,num:1,checked:!1})}catch(a){e.userInfo.cartInfo.push({book:t,num:1,checked:!1})}finally{localStorage.setItem("szbookcarInfo",JSON.stringify(e.userInfo.cartInfo))}},changeGoodNum:function(e,t){var n=t.willNum,a=t.bookName;e.userInfo.cartInfo=e.userInfo.cartInfo.map((function(e){return e.book.bookName===a&&(e.num=n),e}))},changeCheck:function(e,t){var n=t.ischeck,a=t.bookName;e.userInfo.cartInfo=e.userInfo.cartInfo.map((function(e){return e.book.bookName===a&&(e.checked=n),e}))},deleteGood:function(e){e.userInfo.cartInfo=e.userInfo.cartInfo.filter((function(e){return!e.checked}))}},actions:{},modules:{}});a["a"].config.productionTip=!1,a["a"].prototype.$request=v;new a["a"]({router:$,store:z,render:function(e){return e(I)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var a=n("c58b"),o=n.n(a);o.a},"94d5":function(e,t,n){},"96e2":function(e,t,n){"use strict";var a=n("94d5"),o=n.n(a);o.a},bb51:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("div",{staticClass:"topBar",on:{"&scroll":function(t){return e.scrollNum(t)}}},[n("van-search",{attrs:{shape:"round",background:"#fff",placeholder:"请输入搜索关键词"}}),n("van-tabs",{attrs:{"line-width":"30px"}},e._l(e.navbar,(function(e,t){return n("van-tab",{key:t,attrs:{title:e.name,color:"#f10",url:e.url}})})),1)],1),n("div",{ref:"scroll",staticClass:"mainContent"},[n("van-swipe",{attrs:{autoplay:3e3,"indicator-color":"white"}},e._l(e.bannerimages,(function(e){return n("van-swipe-item",{key:e.id},[n("a",{staticStyle:{display:"flex","align-items":"center"},attrs:{href:e.url}},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.post,expression:"image.post"}]})])])})),1),n("van-grid",{staticStyle:{margin:"10px 0"},attrs:{"column-num":5,"icon-size":"46px"}},e._l(e.Home_category,(function(e){return n("van-grid-item",{key:e.id,attrs:{icon:e.post,url:e.url,text:e.name}})})),1),e._l(e.goodsList,(function(t){return n("goodsSection",{key:t.id,scopedSlots:e._u([{key:"left",fn:function(){return[e._v(e._s(t.name))]},proxy:!0},{key:"right",fn:function(){return[e._v(e._s(t.data.length?"更多":""))]},proxy:!0},{key:"goodslist",fn:function(){return e._l(t.data,(function(a){return n("li",{key:a.id,on:{click:function(t){return e.gotoGoods(a.id)}}},["推荐品牌"!=t.name?n("div",{staticClass:"imgbox"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.post,expression:"item.post"}]}),n("p",[e._v(e._s(a.name))]),n("p",[e._v(" ￥"+e._s(a.sale_price)+" "),n("del",[e._v("￥"+e._s(a.market_price))])])]):n("div",{staticClass:"imgbox"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.post,expression:"item.post"}],staticStyle:{width:"40px",height:"40px","margin-left":"24px"}}),n("p",{staticStyle:{width:"88px"}},[e._v(e._s(a.name))])])])}))},proxy:!0},{key:"imgslot",fn:function(){return["开学季专区"==t.name?n("div",{staticClass:"showImg"},e._l(t.inner_ads,(function(e,t){return n("div",{key:e.id,class:3==t?"col-10":"col-3"},[n("a",{attrs:{href:e.link}},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.post,expression:"img.post"}],attrs:{alt:""}})])])})),0):n("div",{staticClass:"showImg"},e._l(t.inner_ads,(function(e){return n("div",{key:e.id,staticClass:"col-10"},[n("a",{attrs:{href:e.link}},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.post,expression:"img.post"}],attrs:{alt:""}})])])})),0)]},proxy:!0}],null,!0)})}))],2),n("span",{directives:[{name:"show",rawName:"v-show",value:this.scroll,expression:"this.scroll"}],ref:"btn_gotop",attrs:{id:"gotop"},on:{click:e.backtop}},[n("i",{staticClass:"iconfont icon-huidaodingbu"})])])},o=[],r=(n("0ec5"),n("21ab")),s=(n("3df5"),n("2830")),i=(n("66cf"),n("343b")),c=(n("5852"),n("d961")),u=(n("4b0a"),n("2bb1")),l=(n("7844"),n("5596")),d=(n("bda7"),n("5e46")),f=(n("da3c"),n("0b33")),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("div",{staticClass:"head"},[n("div",{staticClass:"left"},[e._t("left")],2),n("div",{staticClass:"right"},[e._t("right")],2)]),n("div",{staticClass:"body"},[n("div",{staticClass:"goodslist"},[n("ul",[e._t("goodslist")],2)]),n("div",{staticClass:"imglist"},[e._t("imgslot")],2)])])},h=[],m={},b=m,v=(n("96e2"),n("2877")),g=Object(v["a"])(b,p,h,!1,null,"94265254",null),k=g.exports,y=n("2b0e");y["a"].use(f["a"]),y["a"].use(d["a"]),y["a"].use(l["a"]),y["a"].use(u["a"]),y["a"].use(c["a"]),y["a"].use(i["a"]),y["a"].use(s["a"]),y["a"].use(r["a"]);var _={name:"Home",data:function(){return{navbar:[],bannerimages:[],Home_category:[],goodsList:[],scroll:!1,isok:!0}},methods:{gotoGoods:function(e){this.$router.push("/goods/"+e)},scrollNum:function(){var e=this;if(this.isok){this.isok=!1;var t=this.$refs.scroll.scrollTop;this.scroll=t>800,setTimeout((function(){e.isok=!0}),300)}},backtop:function(){var e=this,t=window.setInterval((function(){var n=e.$refs.scroll.scrollTop,a=Math.floor(-n/5);e.$refs.scroll.scrollTo({top:n+a}),e.isTop=!0,n<=0&&clearInterval(t)}),30)}},components:{goodsSection:k},mounted:function(){window.addEventListener("scroll",this.scrollNum,!0)},created:function(){var e=this;this.$request.post("https://api.szbookmall.com/app/menu/top").then((function(t){e.navbar=t.data.data.list})).catch((function(e){console.log(e+"topbar-请求错误！")})),this.$request.post("https://api.szbookmall.com/app/banner/list").then((function(t){e.bannerimages=t.data.data.banner_data})).catch((function(e){console.log(e+"banner-请求错误！")})),this.$request.post("https://api.szbookmall.com/app/menu/icon").then((function(t){e.Home_category=t.data.data.list})).catch((function(e){console.log(e+"分类列表-请求错误！")})),this.$request.post("https://api.szbookmall.com/app/floor/list").then((function(t){e.goodsList=t.data.data})).catch((function(e){console.log(e+"商品-请求错误！")}))}},I=_,w=(n("21bb"),Object(v["a"])(I,a,o,!1,null,null,null));t["default"]=w.exports},be35:function(e,t,n){},c58b:function(e,t,n){},d0e2:function(e,t,n){"use strict";n("9cb7");var a=n("66fd"),o=(n("0ec5"),n("21ab")),r=(n("3df5"),n("2830")),s=(n("ab71"),n("58e6")),i=(n("bda7"),n("5e46")),c=(n("da3c"),n("0b33")),u=(n("2994"),n("2bdd")),l=(n("e7e5"),n("d399")),d=(n("5246"),n("6b41")),f=(n("5852"),n("d961")),p=(n("4056"),n("44bf")),h=(n("afd4"),n("ca19")),m=(n("c3a6"),n("ad06")),b=(n("4b0a"),n("2bb1")),v=(n("7844"),n("5596")),g=(n("66cf"),n("343b")),k=(n("a52c"),n("2ed4")),y=(n("537a"),n("ac28")),_=(n("66b9"),n("b650")),I=n("2b0e");t["a"]=function(){I["a"].use(_["a"]),I["a"].use(y["a"]),I["a"].use(k["a"]),I["a"].use(g["a"]),I["a"].use(v["a"]),I["a"].use(b["a"]),I["a"].use(m["a"]),I["a"].use(h["a"]),I["a"].use(p["a"]),I["a"].use(f["a"]),I["a"].use(d["a"]),I["a"].use(l["a"]),I["a"].use(u["a"]),I["a"].use(c["a"]),I["a"].use(i["a"]),I["a"].use(s["a"]),I["a"].use(r["a"]),I["a"].use(o["a"]),I["a"].use(a["a"])}}});
//# sourceMappingURL=app.js.map