(function(e){function t(t){for(var r,i,s=t[0],l=t[1],c=t[2],p=0,d=[];p<s.length;p++)i=s[p],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(d.length)d.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var l=n[s];0!==a[l]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="http://42.194.179.50/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0511":function(e,t,n){"use strict";var r=n("dded"),a=n.n(r);a.a},"1e7b":function(e,t,n){},"3c88":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticStyle:{height:"100%",margin:"0"}},[n("el-header",{staticClass:"header"},[n("el-row",[n("el-col",{staticClass:"logo",attrs:{span:12}},[n("i",{staticClass:"el-icon-attract"}),e._v(" 深圳书城后台管理系统 ")]),n("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticStyle:{color:"#fff"},attrs:{type:"text"},on:{click:e.loginOut}},[e._v(e._s(e.logins.text)+" ")])],1)],1)],1),n("el-container",{staticStyle:{height:"80%",overflow:"hidden"}},[n("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2","background-color":"#ffffff","text-color":"rgba(64,158,255,0.5)","active-text-color":"rgb(64,158,255)"},on:{select:e.changeMenu}},[e._l(e.menu,(function(t,r){return[t.submenu?n("el-submenu",{key:t.path,attrs:{index:t.path},scopedSlots:e._u([{key:"title",fn:function(){return[n("i",{class:t.icon}),e._v(" "+e._s(t.text)+" ")]},proxy:!0}],null,!0)},e._l(t.submenu,(function(r,a){return n("el-menu-item",{key:r.path,attrs:{index:t.path+r.path},on:{click:function(n){return e.goto(t.path+r.path,a)}}},[e._v(e._s(r.text))])})),1):n("el-menu-item",{key:t.path,attrs:{index:t.path},on:{click:function(n){return e.goto(t.path,r)}}},[n("i",{class:t.icon}),n("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.text))])])]}))],2),n("el-container",[n("el-main",[n("el-breadcrumb",{staticStyle:{padding:"6px"},attrs:{"separator-class":"el-icon-arrow-right"}},[n("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),n("el-breadcrumb-item",[e._v(e._s(e.$route.fullPath))])],1),n("router-view")],1)],1)],1)],1)},o=[],i=(n("d3b7"),n("ac1f"),n("25f0"),n("5319"),n("1276"),{name:"App",components:{},data:function(){return{activeIndex:"./login",openMenu:[],logins:{text:"退出",path:"/login"},menu:[{text:"首页",path:"/home",icon:"el-icon-s-home"},{text:"用户管理",path:"/user",icon:"el-icon-user-solid"},{text:"商品管理",path:"/goods",icon:"el-icon-s-management",submenu:[{text:"商品列表",path:"/list"},{text:"添加商品",path:"/add"}]},{text:"订单管理",path:"/order",icon:"el-icon-s-order"}],currentIndex:0,isShow:!0}},methods:{changeMenu:function(e){this.activeIndex=e},goto:function(e,t){this.$route.fullPath.toString()!==e.toString()&&(this.$router.replace(e),this.currentIndex=t)},loginOut:function(){this.goto(this.logins.path,0),console.log(88),console.log(localStorage.getItem("userInfo")),localStorage.removeItem("userInfo")}},computed:{route_str:function(){var e=this.$route.path.split("/"),t="";console.log(e),console.log(t);for(var n=0;n<e.length;n++){if(!e[n])return;1==n&&(t+=n),1!=n&&(t=t+">>"+n),console.log(t)}return t}}});window.onselectstart=function(){return!1};var s=i,l=(n("5c0b"),n("2877")),c=Object(l["a"])(s,a,o,!1,null,null,null),u=c.exports,p=n("5c96"),d=n.n(p),m=n("8c4f"),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(" Home ")])},f=[],g={},b=g,v=Object(l["a"])(b,h,f,!1,null,null,null),w=v.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"big-box",staticStyle:{position:"relative",padding:"30px"}},[n("el-row",[n("div",{staticStyle:{margin:"15px 0 15px 0",width:"80%"}},[n("el-input",{ref:"aaa",staticClass:"input-with-select",attrs:{placeholder:"请输入内容",msg:e.search},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchmsg(e.select,e.search)}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[n("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},[n("el-option",{attrs:{label:"日期",value:"日期"}}),n("el-option",{attrs:{label:"用户名",value:"用户名"}}),n("el-option",{attrs:{label:"描述",value:"描述"}})],1),n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.searchmsg(e.select,e.search)}},slot:"append"})],1)],1),n("el-col",[n("el-button",{staticClass:"adduser",attrs:{type:"success"},on:{click:e.showadd}},[e._v("添加用户")])],1)],1),n("el-table",{staticClass:"tabbody",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",idx:e.tableData._id}},[n("el-table-column",{attrs:{label:"日期",align:"center",prop:"date"}}),n("el-table-column",{attrs:{label:"头像",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("img",{staticStyle:{width:"40px"},attrs:{src:e.row.imageUrl,alt:""}})]}}])}),n("el-table-column",{attrs:{label:"用户名",align:"center",prop:"username"}}),n("el-table-column",{attrs:{label:"描述",align:"center",prop:"description"}}),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.useredit(t.row)}}},[e._v("编辑")]),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return e.userdelete(t.row)}}},[e._v("删除")])]}}])})],1),n("div",{ref:"addoneuser",staticClass:"edit-box",staticStyle:{display:"none"},attrs:{id:"adduser-box"}},[n("div",{staticClass:"edittle"},[e._v("新增用户")]),n("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://42.194.179.50/api/upload/singleimg",name:"goodsImg","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?n("img",{staticClass:"avatar",attrs:{src:e.imageUrl,id:"imgactive"}}):n("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),n("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.addusername,callback:function(t){e.addusername=t},expression:"addusername"}},[n("template",{slot:"prepend"},[e._v("用户名:")])],2),n("el-input",{attrs:{placeholder:"请输入密码","show-password":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.adduser(t)}},model:{value:e.addpassword,callback:function(t){e.addpassword=t},expression:"addpassword"}},[n("template",{slot:"prepend"},[e._v("密 码：")])],2),n("div",{staticClass:"editbtn"},[n("el-button",{staticClass:"sure",attrs:{type:"success"},on:{click:e.adduser}},[e._v("确定")]),n("el-button",{staticClass:"canle",attrs:{type:"danger"},on:{click:e.canleadd}},[e._v("取消")])],1)],1),n("main",{ref:"showedit",staticClass:"editbigbox exitedit"},[n("div",{staticClass:"edit-box"},[n("div",{staticClass:"edittle"},[e._v("编辑用户")]),n("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://42.194.179.50/api/upload/singleimg",name:"goodsImg","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[n("img",{staticClass:"avatar",attrs:{src:e.imgpath,id:"imgactive"}}),n("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),n("img",{staticStyle:{positon:"absolute","z-index":"10"},attrs:{src:e.imgpath,alt:""}})]),n("el-input",{attrs:{placeholder:"请输入内容",value:e.username},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}},[n("template",{slot:"prepend"},[e._v("用户名：")])],2),n("el-input",{attrs:{placeholder:"请输入内容"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sureedit(t)}},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}},[n("template",{slot:"prepend"},[e._v("描述：")])],2),n("div",{staticClass:"editbtn"},[n("el-button",{staticClass:"sure",attrs:{type:"success"},on:{click:e.sureedit}},[e._v("确定")]),n("el-button",{staticClass:"canle",attrs:{type:"danger"},on:{click:e.canleedit}},[e._v("取消")])],1)],1)]),n("div",[[n("el-button",{attrs:{type:"text"},on:{click:e.openedit}})]],2),n("el-pagination",{staticStyle:{margin:"0 auto",width:"255px"},attrs:{background:"",data:e.longpage,layout:"prev, pager, next",total:2*e.longpage,"current-page":e.page},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"current-change":e.getuserlistBypage}})],1)},k=[],y=(n("a4d3"),n("e01a"),n("99af"),n("4de4"),n("13d5"),n("fb6a"),n("b64b"),n("3ca3"),n("ddb0"),n("2b3d"),n("96cf"),n("1da1"));function _(){return S.apply(this,arguments)}function S(){return S=Object(y["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:1,n=i.length>1&&void 0!==i[1]?i[1]:{},console.log(t),!(Object.keys(n).length<=0||n.size)){e.next=20;break}if(console.log(1111),!n.size){e.next=13;break}return console.log("5条数据"),e.next=9,fetch("http://42.194.179.50/api/user?page=".concat(t,"&size=5")).then((function(e){return e.json()}));case 9:return r=e.sent,e.abrupt("return",r);case 13:return e.next=15,fetch("http://42.194.179.50/api/user").then((function(e){return e.json()}));case 15:return a=e.sent,console.log("总长度=",a.length),e.abrupt("return",a);case 18:e.next=27;break;case 20:return console.log(2222),"用户名"==n.typemsg?n.type="username":"描述"==n.typemsg?n.type="description":"日期"==n.typemsg&&(n.type="date"),e.next=24,fetch("http://42.194.179.50/api/user?page=1&size=5&type=".concat(n.type,"&msg=").concat(n.msg)).then((function(e){return e.json()}));case 24:return o=e.sent,console.log(o),e.abrupt("return",o);case 27:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}function $(){return C.apply(this,arguments)}function C(){return C=Object(y["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:1,n=o.length>1&&void 0!==o[1]?o[1]:{},console.log(t),!(Object.keys(n).length<=0)){e.next=11;break}return console.log(1111),e.next=7,fetch("http://42.194.179.50/api/user?page=".concat(t,"&size=5")).then((function(e){return e.json()}));case 7:return r=e.sent,e.abrupt("return",r);case 11:return console.log(2222),"用户名"==n.typemsg?n.type="username":"描述"==n.typemsg?n.type="description":"日期"==n.typemsg&&(n.type="date"),e.next=15,fetch("http://42.194.179.50/api/user/mohu?page=1&size=5&type=".concat(n.type,"&msg=").concat(n.msg)).then((function(e){return e.json()}));case 15:return a=e.sent,console.log(a),e.abrupt("return",a);case 18:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}var j={data:function(){return{input1:"",input2:"",input3:"",select:"用户名",search:"",username:"",idx:"",description:"",longpage:6,page:1,item:"",imageUrl:"",imgpath:"",addusername:"",addpassword:"",imgpathsend:"",imageindex:0,tableData:[]}},methods:{getuserlistBypage:function(e){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,_(e,{size:5});case 2:r=n.sent,t.tableData=r;case 4:case"end":return n.stop()}}),n)})))()},searchmsg:function(e,t){var n=this;return Object(y["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,$(1,{typemsg:e,msg:t});case 2:a=r.sent,n.tableData=a;case 4:case"end":return r.stop()}}),r)})))()},useredit:function(e){this.$refs.showedit.className="showedit editbigbox",this.username=e.username,this.description=e.description,this.imgpath=e.imageUrl,console.log(this.imgpath),this.idx=e._id},sureedit:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://42.194.179.50/api/user",{method:"PUT",body:JSON.stringify({_id:e.idx,username:e.username,description:e.description,imageUrl:e.imgpath}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()}));case 2:n=t.sent,n.code&&200==n.code?(e.tableData=e.tableData.reduce((function(t,n){return n._id==e.idx&&(n.description=e.description,n.username=e.username,n.imageUrl=e.imgpath),t.concat(n)}),[]),e.openedit("编辑成功"),e.$refs.showedit.className="exitedit editbigbox"):e.openedit("编辑失败"),e.imageUrl="";case 5:case"end":return t.stop()}}),t)})))()},canleedit:function(){this.$refs.showedit.className="exitedit editbigbox"},openedit:function(e){var t=this;this.$alert(e,"提示信息",{confirmButtonText:"确定",callback:function(){t.$message({type:"info",message:"action: 完成"})}})},userdelete:function(e){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(y["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,fetch("http://42.194.179.50/api/user?_id=".concat(e._id),{method:"delete"}).then((function(e){return e.json()}));case 2:if(!e.imageUrl){n.next=8;break}return r=e.imageUrl.replace(/http:\/\/42.194.179.50:80/,".."),n.next=6,fetch("http://42.194.179.50/api/upload/rmimg?rm_url=".concat(r),{method:"delete"}).then((function(e){return e.json}));case 6:a=n.sent,console.log(a);case 8:return t.tableData=t.tableData.filter((function(t){return t._id!=e._id})),t.$message({type:"success",message:"删除成功!"}),n.next=12,_(1);case 12:o=n.sent,t.longpage=o.length;case 14:case"end":return n.stop()}}),n)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}));case 1:case"end":return n.stop()}}),n)})))()},showadd:function(){this.$refs.addoneuser.style="display:flex"},canleadd:function(){this.$refs.addoneuser.style="display:none"},adduser:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(e.addusername,e.addpassword,e.imageUrl),e.imgpath=e.imageUrl,console.log(!/\s/g.test(e.addusername)),!e.addusername||!e.addpassword||/\s+/g.test(e.addusername)||/\s+/g.test(e.addpassword)){t.next=22;break}return t.next=6,fetch("http://42.194.179.50/api/reg",{method:"post",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({imageUrl:e.imgpathsend,username:e.addusername,password:e.addpassword})}).then((function(e){return e.json()}));case 6:return n=t.sent,console.log(n),e.imageUrl="",e.openedit("添加成功"),e.tableData.length%10&&(e.tableData=e.tableData.concat({imageUrl:e.imgpathsend,username:e.addusername,password:e.addpassword})),t.next=13,_(1);case 13:r=t.sent,e.longpage=r.length,e.imgpath=e.imgpathsend,console.log(e.imgpath),e.addusername="",e.addpassword="",e.canleadd(),t.next=23;break;case 22:e.openedit("添加失败");case 23:case"end":return t.stop()}}),t)})))()},handleAvatarSuccess:function(e,t){this.imageUrl=URL.createObjectURL(t.raw),this.imgpathsend="http://42.194.179.50:80/"+t.response.data.uploadUrl.slice(3),console.log(this.imgpathsend),this.imgpath=this.imgpathsend},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,n=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),n||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&n}},created:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,_(1,{size:5});case 2:return n=t.sent,e.tableData=n,console.log("this.tableData",e.tableData),t.next=7,_(1);case 7:r=t.sent,e.longpage=r.length,console.log("this.datalong",e.longpage);case 10:case"end":return t.stop()}}),t)})))()},mounted:function(){}},z=j,O=(n("7332"),Object(l["a"])(z,x,k,!1,null,null,null)),R=O.exports,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"uesr_main"},[n("router-view")],1)},F=[],P={},E=P,D=Object(l["a"])(E,N,F,!1,null,null,null),I=D.exports,U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{ref:"book",staticClass:"demo-book",staticStyle:{"padding-top":"30px"},attrs:{model:e.book,rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"书籍名称",prop:"bookName"}},[n("el-input",{model:{value:e.book.bookName,callback:function(t){e.$set(e.book,"bookName",t)},expression:"book.bookName"}})],1),n("el-form-item",{attrs:{label:"ISBN",prop:"isbn"}},[n("el-input",{model:{value:e.book.isbn,callback:function(t){e.$set(e.book,"isbn",e._n(t))},expression:"book.isbn"}})],1),n("el-form-item",{attrs:{label:"作者",prop:"author"}},[n("el-input",{model:{value:e.book.author,callback:function(t){e.$set(e.book,"author",t)},expression:"book.author"}})],1),n("el-form-item",{attrs:{label:"市场价"}},[n("el-input",{model:{value:e.book.price,callback:function(t){e.$set(e.book,"price",e._n(t))},expression:"book.price"}})],1),n("el-form-item",{attrs:{label:"上线价格"}},[n("el-input",{model:{value:e.book.line_price,callback:function(t){e.$set(e.book,"line_price",e._n(t))},expression:"book.line_price"}})],1),n("el-form-item",{attrs:{label:"库存"}},[n("el-input",{model:{value:e.book.num,callback:function(t){e.$set(e.book,"num",e._n(t))},expression:"book.num"}})],1),n("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"出版社"}},[n("el-select",{attrs:{filterable:"",placeholder:"请选择出版社"},model:{value:e.book.public,callback:function(t){e.$set(e.book,"public",t)},expression:"book.public"}},e._l(e.options,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),n("el-form-item",{attrs:{label:"出版时间"}},[n("el-col",{staticStyle:{width:"160px",padding:"0"}},[n("el-form-item",{attrs:{prop:"date1"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.book.time,callback:function(t){e.$set(e.book,"time",t)},expression:"book.time"}})],1)],1)],1),n("el-form-item",{attrs:{label:"上架商品"}},[n("el-switch",{model:{value:e.book.on_line,callback:function(t){e.$set(e.book,"on_line",t)},expression:"book.on_line"}})],1),n("el-form-item",{attrs:{label:"描述"}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.book.desc,callback:function(t){e.$set(e.book,"desc",t)},expression:"book.desc"}})],1),n("el-form-item",{staticStyle:{height:"100%"},attrs:{label:"上传图片"}},[n("el-upload",{attrs:{action:"http://42.194.179.50/api/upload/singleimg","list-type":"picture-card",name:"goodsImg",limit:1,"on-success":e.suc,"on-remove":e.handleRemove,"before-upload":e.before_Upload}},[n("i",{staticClass:"el-icon-plus"}),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png/gif文件，且不超过2M")])])],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.submitGoods}},[e._v("立即创建")])],1)],1)},T=[],B=(n("caad"),{data:function(){return{book:{bookName:"",desc:"",author:"",public:"",isbn:"",time:"",price:0,line_price:0,num:0,img:"",on_line:!1},options:[{value:"湖南文艺",label:"湖南文艺"},{value:"上海文艺",label:"上海文艺"},{value:"上海三联",label:"上海三联"},{value:"台海",label:"台海"},{value:"云南人民",label:"云南人民"},{value:"人民文学",label:"人民文学"},{value:"浙江人民",label:"浙江人民"},{value:"新星",label:"新星"},{value:"北京联合",label:"北京联合"},{value:"中信",label:"中信"},{value:"浙江教育",label:"浙江教育"}],rules:{bookName:[{required:!0,message:"请输入商品名称",trigger:"blur"}],isbn:[{required:!0,message:"ISBN不能为空",trigger:"blur"},{required:!0,type:"number",message:"请正确填写ISBN值",trigger:"blur"}],author:[{required:!0,message:"请输入作者名称",trigger:"blur"}]},rmimg:!0}},methods:{before_Upload:function(e){var t=["image/jpeg","image/jpg","image/png","image/gif"].includes(e.type),n=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),n||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&n},suc:function(e){this.book.img=e.data.uploadUrl},handleRemove:function(){fetch("http://42.194.179.50/api/upload/rmimg?rm_url=".concat(this.book.urlImg),{method:"delete"})},submitGoods:function(){var e=this;this.book.bookName&&this.book.author&&this.book.isbn?fetch("http://42.194.179.50/api/goods/",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.book)}).then((function(e){return e.json()})).then((function(t){1==t.code?(e.rmimg=!1,e.$router.replace("/goods/list")):e.$message.error("创建失败，请重新创建！")})):this.$message.error("带 * 的信息为必填！")}},beforeDestroy:function(){this.rmimg&&this.book.urlImg&&this.handleRemove()}}),A=B,J=(n("0511"),Object(l["a"])(A,U,T,!1,null,null,null)),L=J.exports,q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"user",staticStyle:{"padding-top":"28px"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.books,border:"",size:"small","highlight-current-row":""}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-form",{staticClass:"book_info demo-table-expand",attrs:{"label-position":"left",inline:""}},[n("el-form-item",{attrs:{label:"出版社"}},[n("span",[e._v(e._s(t.row.public))])]),n("el-form-item",{attrs:{label:"IBSN"}},[n("span",[e._v(e._s(t.row.isbn))])]),n("el-form-item",{attrs:{label:"出版时间"}},[n("span",[e._v(e._s(t.row.time))])]),n("el-form-item",{attrs:{label:"市场价"}},[n("span",[e._v(e._s(t.row.price))])]),n("el-form-item",{attrs:{label:"图片"}},[n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.urlImg(t.row.img)}})],1)],1)]}}])}),n("el-table-column",{attrs:{label:"商品 ID",width:"200",prop:"_id",resizable:!1}}),n("el-table-column",{attrs:{label:"书籍名称",width:"200",prop:"bookName","show-overflow-tooltip":"",resizable:!1}}),n("el-table-column",{attrs:{label:"作者",width:"150",prop:"author","show-overflow-tooltip":"",resizable:!1}}),n("el-table-column",{attrs:{label:"价格",width:"100",prop:"line_price",resizable:!1}}),n("el-table-column",{attrs:{label:"库存",width:"100",prop:"num",resizable:!1}}),n("el-table-column",{attrs:{label:"描述",width:"380",prop:"desc",resizable:!1}}),n("el-table-column",{attrs:{fixed:"right",width:"160",resizable:!1},scopedSlots:e._u([{key:"header",fn:function(t){return[n("el-input",{attrs:{size:"mini",placeholder:"输入书籍名称搜索",id:"btn"},on:{input:function(n){return e.search(t)}},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}})]}},{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.handleEdit(t.row)}}},[e._v("编辑")]),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),n("el-pagination",{staticStyle:{"padding-top":"16px"},attrs:{layout:"prev, pager, next, jumper","current-page":e.currentPage,total:180},on:{"current-change":e.changePage}}),n("el-dialog",{attrs:{title:"编辑信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{attrs:{model:e.form}},[n("el-form-item",{attrs:{label:"书籍名称",prop:"bookName","label-width":e.formLabelWidth}},[n("el-input",{model:{value:e.form.bookName,callback:function(t){e.$set(e.form,"bookName",t)},expression:"form.bookName"}})],1),n("el-form-item",{attrs:{label:"ISBN",prop:"isbn","label-width":e.formLabelWidth}},[n("el-input",{model:{value:e.form.isbn,callback:function(t){e.$set(e.form,"isbn",e._n(t))},expression:"form.isbn"}})],1),n("el-form-item",{attrs:{label:"作者",prop:"author","label-width":e.formLabelWidth}},[n("el-input",{model:{value:e.form.author,callback:function(t){e.$set(e.form,"author",t)},expression:"form.author"}})],1),n("el-form-item",{attrs:{label:"市场价","label-width":e.formLabelWidth}},[n("el-input",{model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",e._n(t))},expression:"form.price"}})],1),n("el-form-item",{attrs:{label:"上线价格","label-width":e.formLabelWidth}},[n("el-input",{model:{value:e.form.line_price,callback:function(t){e.$set(e.form,"line_price",e._n(t))},expression:"form.line_price"}})],1),n("el-form-item",{attrs:{label:"库存","label-width":e.formLabelWidth}},[n("el-input",{model:{value:e.form.num,callback:function(t){e.$set(e.form,"num",e._n(t))},expression:"form.num"}})],1),n("el-form-item",{attrs:{label:"出版社","label-width":e.formLabelWidth}},[n("el-input",{model:{value:e.form.public,callback:function(t){e.$set(e.form,"public",t)},expression:"form.public"}})],1),n("el-form-item",{attrs:{label:"出版时间","label-width":e.formLabelWidth}},[n("el-col",{staticStyle:{width:"160px",padding:"0"}},[n("el-form-item",{attrs:{prop:"date1"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.form.time,callback:function(t){e.$set(e.form,"time",t)},expression:"form.time"}})],1)],1)],1),n("el-form-item",{attrs:{label:"上架商品","label-width":e.formLabelWidth}},[n("el-switch",{model:{value:e.form.on_line,callback:function(t){e.$set(e.form,"on_line",t)},expression:"form.on_line"}})],1),n("el-form-item",{attrs:{label:"描述","label-width":e.formLabelWidth}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("确 定")])],1)],1)],1)},M=[],W=(n("4d63"),n("466d"),{data:function(){return{books:[],searchText:"",currentPage:1,searchString:[],dialogFormVisible:!1,form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},formLabelWidth:"120px",options:"",rules:{bookName:[{required:!0,message:"请输入商品名称",trigger:"blur"}],isbn:[{required:!0,message:"ISBN不能为空",trigger:"blur"},{required:!0,type:"number",message:"请正确填写ISBN值",trigger:"blur"}],author:[{required:!0,message:"请输入作者名称",trigger:"blur"}]}}},methods:{urlImg:function(e){var t=e.slice(3);return t="http://42.194.179.50/"+t,t},changePage:function(e){var t=e;this.getbook({page:t,size:10})},handleEdit:function(e){this.dialogFormVisible=!0,this.form=e},update:function(){this.dialogFormVisible=!1,fetch("http://42.194.179.50/api/goods/",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.form)})},handleDelete:function(e){var t=this;if(this.$confirm("确定删除？")){var n=e._id,r=e.img;if(fetch("http://42.194.179.50/api/goods/"+n,{method:"delete"}).then((function(e){return e.json()})).then((function(){t.books=t.books.filter((function(e){return e._id!==n}))})),"../images/szbook/fa.jpg"==r)return;fetch("http://42.194.179.50/api/upload/rmimg?rm_url=".concat(r),{method:"delete"})}},search:function(){if(this.searchText){var e=new RegExp(this.searchText);this.getbook({page:1,size:200,noShow:!0}),this.books=this.searchString.filter((function(t){return(t.bookName+"").match(e)}))}else this.getbook()},getbook:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};fetch("http://42.194.179.50/api/goods?page=".concat(t.page?t.page:1,"&size=").concat(t.size?t.size:10)).then((function(e){return e.json()})).then((function(n){t.noShow?e.searchString=n.data:e.books=n.data}))}},mounted:function(){this.getbook(),this.getbook({page:1,size:200,noShow:!0})}}),V=W,G=(n("8385"),Object(l["a"])(V,q,M,!1,null,null,null)),H=G.exports,K=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{"default-sort":{prop:"add_time",order:"descending"},"highlight-current-row":"",data:e.orderdata}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-table",{attrs:{data:t.row.details}},[n("el-table-column",{attrs:{label:"商品编号",prop:"isbn","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{label:"商品名",prop:"bookName","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{label:"单价",prop:"line_price",width:"150"}}),n("el-table-column",{attrs:{label:"数量",prop:"buynum",width:"150"}}),n("el-table-column",{attrs:{label:"总价",prop:"",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{attrs:{data:t.row}},[e._v(e._s((parseFloat(t.row.buynum)*parseFloat(t.row.line_price.substr(1))).toFixed(2)))])]}}],null,!0)})],1)]}}])}),n("el-table-column",{attrs:{label:"订单号",prop:"_id",width:"120","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{label:"下单日期",sortable:"",prop:"add_time",width:"120"}}),n("el-table-column",{attrs:{label:"用户名",prop:"username",width:"80"}}),n("el-table-column",{attrs:{label:"商品数量",prop:"goodsNum",width:"90"}}),n("el-table-column",{attrs:{label:"总价",prop:"totalPrice",width:"80"}}),n("el-table-column",{attrs:{label:"配送地址",prop:"address","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{directives:[{name:"show",rawName:"v-show",value:t.row.isshow,expression:"scope.row.isshow"}],model:{value:t.row.address,callback:function(n){e.$set(t.row,"address",n)},expression:"scope.row.address"}}),n("span",{directives:[{name:"show",rawName:"v-show",value:!t.row.isshow,expression:"!scope.row.isshow"}]},[e._v(e._s(t.row.address))])]}}])}),n("el-table-column",{attrs:{label:"联系方式",prop:"phone",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{directives:[{name:"show",rawName:"v-show",value:t.row.isshow,expression:"scope.row.isshow"}],model:{value:t.row.phone,callback:function(n){e.$set(t.row,"phone",n)},expression:"scope.row.phone"}}),n("span",{directives:[{name:"show",rawName:"v-show",value:!t.row.isshow,expression:"!scope.row.isshow"}]},[e._v(e._s(t.row.phone))])]}}])}),n("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{staticStyle:{padding:"13px"},attrs:{type:"success",size:"mini",circle:"",icon:"el-icon-circle-check"},on:{click:function(n){return e.isfinishEdit(t.$index,t.row)}}}),n("el-button",{staticStyle:{padding:"13px","margin-left":"2px"},attrs:{type:"primary",size:"mini",circle:"",icon:"el-icon-edit"},on:{click:function(n){return e.isEdit(t.$index,t.row)}}}),n("el-button",{staticStyle:{padding:"13px","margin-left":"2px"},attrs:{type:"danger",size:"mini",circle:"",icon:"el-icon-delete"},on:{click:function(n){return e.delData(t.row._id)}}})]}}])})],1),n("pagination",{attrs:{datasNum:e.totoalDataNum},on:{getCurrentPage:e.getCurrentPage,getPageSize:e.getPageSize}})],1)},Q=[],X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"block pages"},[n("el-pagination",{staticClass:"pages",attrs:{"page-sizes":[5,10,20,50],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.datasNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},Y=[],Z={name:"pagination",props:["datasNum"],data:function(){return{pageSize:5,currentPage:1}},methods:{handleSizeChange:function(e){this.pageSize=e,this.$emit("getPageSize",this.currentPage,this.pageSize)},handleCurrentChange:function(e){this.currentPage=e,this.$emit("getCurrentPage",this.currentPage,this.pageSize)}}},ee=Z,te=(n("9c49"),Object(l["a"])(ee,X,Y,!1,null,null,null)),ne=te.exports;function re(){return ae.apply(this,arguments)}function ae(){return ae=Object(y["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{page:1,size:10},n="",n+="page="+t.page,n+="&size="+t.size,e.next=6,fetch("http://42.194.179.50/api/order?"+n).then((function(e){return e.text()}));case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)}))),ae.apply(this,arguments)}function oe(){return ie.apply(this,arguments)}function ie(){return ie=Object(y["a"])(regeneratorRuntime.mark((function e(){var t,n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{_id:"",address:"",phone:""},e.next=3,fetch("http://42.194.179.50/api/order",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:t.address,phone:t.phone,_id:t._id})}).then((function(e){return e.text()}));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),ie.apply(this,arguments)}function se(){return le.apply(this,arguments)}function le(){return le=Object(y["a"])(regeneratorRuntime.mark((function e(){var t,n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{_id:""},e.next=3,fetch("http://42.194.179.50/api/order/"+t._id,{method:"DELETE"}).then((function(e){return e.text()}));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),le.apply(this,arguments)}n("4160"),n("d81d"),n("b680"),n("159b");var ce=n("5530");function ue(){return pe.apply(this,arguments)}function pe(){return pe=Object(y["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{goodsID:[]},n="goodsID=",t.goodsID.forEach((function(e){n+=e.isbn+","})),e.next=5,fetch("http://42.194.179.50/api/goods?"+n).then((function(e){return e.text()}));case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)}))),pe.apply(this,arguments)}function de(e,t){var n=JSON.parse(e);t.totoalDataNum=n.data[n.data.length-1].orderNum,n.data.slice(0,n.data.length-1).forEach(function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.details,t.goodsNum=0,t.totalPrice=0,t.isshow=!1,n.forEach((function(e){t.goodsNum+=e.buynum})),ue({goodsID:n}).then((function(e){var r=JSON.parse(e).data,a=r.map((function(e,t){return Object(ce["a"])(Object(ce["a"])({},n[t]),e)}));a.forEach((function(e){t.totalPrice+=parseFloat(e.buynum)*parseFloat(e.line_price.substr(1))})),t.totalPrice=t.totalPrice.toFixed(2),t.details=a}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.orderdata=n.data.slice(0,n.data.length-1)}var me={data:function(){return{totoalDataNum:0,pagesize:5,currentpage:1,orderdata:[]}},computed:{},created:function(){var e=this;re({size:this.pagesize,page:this.currentpage}).then((function(t){de(t,e)}))},methods:{getCurrentPage:function(e,t){var n=this;this.pagesize=t,this.currentpage=e,re({size:this.pagesize,page:this.currentpage}).then((function(e){de(e,n)}))},getPageSize:function(e,t){var n=this;this.pagesize=t,this.currentpage=e,re({size:this.pagesize,page:this.currentpage}).then((function(e){de(e,n)}))},delData:function(e){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(y["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,se({_id:e});case 2:r=n.sent,1===JSON.parse(r).code&&t.$message({type:"success",message:"删除成功!"}),re({size:t.pagesize,page:t.currentpage}).then((function(e){de(e,t)}));case 5:case"end":return n.stop()}}),n)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}));case 1:case"end":return n.stop()}}),n)})))()},isEdit:function(e,t){t.isshow=!0},isfinishEdit:function(e,t){var n=this;this.$confirm("此操作将永久修改该信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(y["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,oe({_id:t._id,address:t.address,phone:t.phone});case 2:r=e.sent,1===JSON.parse(r).code&&(n.$message({message:"信息修改成功",type:"success"}),re({size:n.pagesize,page:n.currentpage}).then((function(e){de(e,n)})),t.isshow=!1);case 4:case"end":return e.stop()}}),e)})))).catch((function(){n.$message({type:"info",message:"已取消修改"})}))}},components:{pagination:ne}},he=me,fe=(n("80f8"),Object(l["a"])(he,K,Q,!1,null,null,null)),ge=fe.exports,be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"regBox"},[n("el-main",[n("el-form",{ref:"ReginForm",staticClass:"regform",attrs:{model:e.ReginForm,rules:e.rule,"label-width":"0"}},[n("h3",{staticClass:"reg-text",staticStyle:{"line-height":"2rem"}},[e._v("免费-注册")]),n("el-form-item",{attrs:{prop:"tel"}},[n("el-input",{attrs:{type:"text",placeholder:"用户名"},on:{blur:e.fr},model:{value:e.ReginForm.tel,callback:function(t){e.$set(e.ReginForm,"tel",t)},expression:"ReginForm.tel"}})],1),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.ReginForm.password,callback:function(t){e.$set(e.ReginForm,"password",t)},expression:"ReginForm.password"}})],1),n("el-form-item",[n("el-button",{staticClass:"submitBtn",attrs:{type:"success",round:""},nativeOn:{click:function(t){return t.preventDefault(),e.submit(t)}}},[e._v("注册")]),n("hr"),n("p",{staticStyle:{"font-size":"0.2rem"}},[e._v(" 已有 "),n("span",{staticStyle:{color:"#409eff"}},[e._v("“深圳书城后台管理系统”账号")]),e._v("，马上 "),n("span",{staticClass:"to",on:{click:e.tologin}},[e._v("登录")])])],1)],1)],1)],1)},ve=[],we={data:function(){var e=this,t=function(e,t,n){return""===t?n(new Error("密码不能为空")):n()},n=function(e,t,n){return""===!t?n(new Error("账号不能为空")):/\s+/g.test(t)?n(new Error("正确填写用户名")):void n()},r=function(t,n,r){if(e.num+=1,console.log(e.ok),1!=e.num)return e.okReg?void r():(console.log(e.logining),r(new Error("用户名存在！")))};return{ReginForm:{password:"",tel:""},num:0,okReg:!1,logining:!1,sendAuthCode:!0,auth_time:0,verification:"",rule:{password:[{required:!0,validator:t,message:"密码不能为空！",trigger:"blur"}],tel:[{required:!0,validator:n,message:"账号不能为空！",trigger:"blur"},{validator:r,message:"账号已存在，请重新填写！",trigger:"blur"}]}}},methods:{fr:function(){var e=this,t="http://42.194.179.50/api/reg/check";fetch("".concat(t,"?username=").concat(this.ReginForm.tel),{headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){console.log("去重：",t),"1"==t.code?e.okReg=!0:(e.okReg=!1,e.$message.error("账号已存在！"))}))},getAuthCode:function(){var e=this,t=this.ReginForm.tel;console.log(t);var n=" ";this.$http.get(n).then((function(e){console.log("请求成功",e)}),(function(e){console.log("请求失败",e)})),this.sendAuthCode=!1,this.auth_time=10;var r=setInterval((function(){e.auth_time--,e.auth_time<=0&&(e.sendAuthCode=!0,clearInterval(r))}),1e3)},tologin:function(){this.$router.push("/login")},thisAjax:function(){var e=this.ReginForm.password,t=this.ReginForm.tel,n=this.verification,r=this,a="http://42.194.179.50/api/reg";fetch(a,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e,username:t,mCodeData:n})}).then((function(e){console.log("跳转",e),r.tologin()}),(function(e){alert("请求失败",e)}))},submit:function(){var e=this;console.log(this.okReg),this.$refs.ReginForm.validate((function(t){if(console.log(e.okReg),!t)return e.$message.error("请按要求填写注册信息！"),!1;e.fr(),e.okReg&&(e.thisAjax(),e.$router.replace("/login"))}))},reset:function(){this.$refs.ReginForm.resetFields()}}},xe=we,ke=(n("9138"),Object(l["a"])(xe,be,ve,!1,null,null,null)),ye=ke.exports,_e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"loginBox"},[n("el-main",[n("el-form",{ref:"ruleForm",staticClass:"loginform",attrs:{model:e.ruleForm,rules:e.rule,"label-width":"0"}},[n("h3",{staticClass:"login-text",staticStyle:{"line-height":"2rem"}},[e._v("欢迎-登录")]),n("el-form-item",{attrs:{prop:"tel"}},[n("el-input",{attrs:{type:"text",placeholder:"用户名"},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{attrs:{placeholder:"输入验证码"},model:{value:e.ruleForm.vcode,callback:function(t){e.$set(e.ruleForm,"vcode",t)},expression:"ruleForm.vcode"}},[n("el-button",{staticStyle:{width:"150px","z-index":"10",padding:"0",margin:"0"},attrs:{slot:"append"},domProps:{innerHTML:e._s(e.svg_vcode)},on:{click:e.getAuthCode},slot:"append"},[e._v("点击获取验证码")])],1)],1),n("el-form-item",{staticStyle:{margin:"10px auto"}},[n("el-button",{staticClass:"submitBtn",attrs:{type:"primary",round:""},nativeOn:{click:function(t){return t.preventDefault(),e.submit(t)}}},[e._v("登录")]),n("hr"),n("p",{staticStyle:{"font-size":"0.2rem"}},[e._v(" 暂无 "),n("span",{staticStyle:{color:"#56ac67","font-size":"0.2rem"}},[e._v("“深圳书城后台管理系统”账号")]),e._v("， 马上 "),n("span",{staticClass:"to",on:{click:e.toreg}},[e._v("注册")])])],1)],1)],1)],1)},Se=[],$e={data:function(){var e=function(e,t,n){return""===t?n(new Error("密码不能为空")):n()},t=function(e,t,n){return""===t?n(new Error("账号不能为空")):/\s+/g.test(t)?n(new Error("正则填写用户名")):void n()};return{ruleForm:{password:"",username:"",vcode:"",mdl:!1},svg_vcode:"",sendAuthCode:!0,auth_time:0,verification:"",rule:{password:[{required:!0,validator:e,message:"密码不能为空！",trigger:"blur"}],tel:[{required:!0,validator:t,message:"账号不能为空！",trigger:"blur"}]}}},methods:{getAuthCode:function(){var e=this;fetch("http://42.194.179.50/api/vcode",{credentials:"include"}).then((function(e){return e.json()})).then((function(t){e.svg_vcode=t.data}))},toreg:function(){this.$router.push("/reg")},thisAjax:function(){var e=this.ruleForm.password,t=this.ruleForm.tel,n=this.verification,r=this,a="http://42.194.179.50/api/reg";fetch(a,{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:{passwordData:e,phoneData:t,mCodeData:n}}).then((function(e){console.log("跳转",e),r.$router.replace("/home")}),(function(e){alert("请求失败",e)}))},submit:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(t){var n="";for(var r in e.ruleForm)n+=r,n+="=",n+=e.ruleForm[r],n+="&";n=n.substr(0,n.length-1),console.log(e.ruleForm),fetch("http://42.194.179.50/api/login?".concat(n),{credentials:"include"}).then((function(e){return e.json()})).then((function(t){1==t.code?(localStorage.setItem("userInfo",JSON.stringify([t.data])),e.$router.replace("/home")):10==t.code?e.$message.error("验证码错误！"):e.$message.error("帐号密码错误！")}))}else e.$message.error("请完整输入内容！")}))},reset:function(){this.$refs.ruleForm.resetFields()}},created:function(){this.getAuthCode()}},Ce=$e,je=(n("af62"),Object(l["a"])(Ce,_e,Se,!1,null,null,null)),ze=je.exports,Oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(" 404 ")])},Re=[],Ne={},Fe=Ne,Pe=Object(l["a"])(Fe,Oe,Re,!1,null,null,null),Ee=Pe.exports;r["default"].use(m["a"]);var De=new m["a"]({routes:[{path:"/",redirect:"/login"},{path:"/home",component:w},{path:"/user",component:R},{path:"/order",component:ge},{path:"/goods",component:I,children:[{path:"",redirect:"list"},{path:"add",component:L},{path:"list",component:H}]},{path:"/login",component:ze},{path:"/reg",component:ye,children:[{name:"login",path:"login",component:ze}]},{path:"/404",component:Ee},{path:"*",redirect:"/404"}]});De.beforeEach((function(e,t,n){var r=JSON.parse(localStorage.getItem("userInfo"))||{};r[0]?(console.log(111),e?n():n({path:"/home"},n())):"/reg"==e.fullPath?(console.log(e.fullPath),n()):n({path:"/login"},n())}));var Ie=De;n("0fae");r["default"].config.productionTip=!1,r["default"].use(d.a),new r["default"]({router:Ie,render:function(e){return e(u)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var r=n("9c0c"),a=n.n(r);a.a},7044:function(e,t,n){},7332:function(e,t,n){"use strict";var r=n("7044"),a=n.n(r);a.a},"80f8":function(e,t,n){"use strict";var r=n("1e7b"),a=n.n(r);a.a},8385:function(e,t,n){"use strict";var r=n("fa8c"),a=n.n(r);a.a},9138:function(e,t,n){"use strict";var r=n("f4f2"),a=n.n(r);a.a},"9c0c":function(e,t,n){},"9c49":function(e,t,n){"use strict";var r=n("3c88"),a=n.n(r);a.a},af62:function(e,t,n){"use strict";var r=n("dcb9"),a=n.n(r);a.a},dcb9:function(e,t,n){},dded:function(e,t,n){},f4f2:function(e,t,n){},fa8c:function(e,t,n){}});